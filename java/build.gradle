apply plugin: 'java'
apply plugin: 'application'

mainClassName = "com.bezirk.examples.HelloWorld"

/*Currently using local jar from lib folder*/
repositories {
    flatDir {
        dirs 'libs'
    }
}

//TODO: Change to publicly accessible repository for managing dependencies instead of local jars
dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
}

//def final String LIB_BIN_FOLDER = "lib-zeromq-bin"
//def nativeLibPath
//
//run {
//    systemProperties = System.getProperties()
//    nativeLibPath = System.getProperty("java.io.tmpdir") + "${LIB_BIN_FOLDER}" + File.pathSeparator + systemProperties['java.library.path'];
//    systemProperties['java.library.path'] = nativeLibPath;
//    println "PATH: " + systemProperties['java.library.path']
//}

//run {
//    def final String LIB_BIN_FOLDER = "lib-zeromq-bin"
//    systemProperties = System.getProperties()
//    def javaLibPath =  System.getProperty("java.io.tmpdir") + File.separator+ "${LIB_BIN_FOLDER}" +  File.separator+ File.pathSeparator + systemProperties['java.library.path'];
//    systemProperties['java.library.path'] = javaLibPath;
//    environment 'DYLD_FALLBACK_LIBRARY_PATH', "$javaLibPath"
//    println "PATH: " + systemProperties['java.library.path']
//}


//def final String LIB_BIN_FOLDER = "lib-zeromq-bin"
//def final PLAT_OSX = "osx"
//def final PLAT_X64_LINUX = "x64linux"
//def final PLAT_X64_WINDOWS = "x64windows"
//
//def os = System.properties['os.name'].toLowerCase()
//def platform
//
//if (os.contains("mac")) {
//    platform = PLAT_OSX
//}
//else if (os.contains("linux")) {
//    platform = PLAT_X64_LINUX
//}
//else if (os.contains("windows")) {
//    platform = PLAT_X64_WINDOWS
//}
//else {
//    throw new RuntimeException("platform not supported: $os")
//}
//
//
//test {
//    systemProperties = System.getProperties()
//    def javaLibPath =  System.getProperty("java.io.tmpdir") + File.separator+ "${LIB_BIN_FOLDER}" +  File.separator+ File.pathSeparator + systemProperties['java.library.path'];
//    println "$javaLibPath"
//    if (platform.equals(PLAT_OSX)) {
//        environment 'DYLD_FALLBACK_LIBRARY_PATH', "$javaLibPath"
//        println "$System.env.DYLD_FALLBACK_LIBRARY_PATH"
//    }
//    systemProperties = System.getProperties()
//    systemProperties['java.library.path'] = javaLibPath
//    systemProperty "java.library.path", javaLibPath
//    println System.getProperty("java.library.path")
//}